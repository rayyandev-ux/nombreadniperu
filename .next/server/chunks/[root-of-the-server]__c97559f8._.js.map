{"version":3,"sources":["../../../lib/db.ts"],"sourcesContent":["import { Pool } from 'pg';\n\nconst connectionString = process.env.DATABASE_URL || 'postgresql://placeholder:placeholder@localhost:5432/placeholder';\n\n// Only throw in runtime (not build time) if we actually try to connect and fail, \n// OR if you prefer, keep the check but make it optional for build\nif (!process.env.DATABASE_URL && process.env.NODE_ENV !== 'production') {\n  console.warn('DATABASE_URL is missing - using placeholder for build/dev');\n}\n\nexport const pool = new Pool({\n  connectionString,\n  ssl: { rejectUnauthorized: false },\n});\n\nexport async function query(text: string, params?: any[]) {\n  const start = Date.now();\n  const res = await pool.query(text, params);\n  const duration = Date.now() - start;\n  // console.log('executed query', { text, duration, rows: res.rowCount });\n  return res;\n}\n"],"names":[],"mappings":"msCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,yCAEA,IAAM,EAAmB,QAAQ,GAAG,CAAC,YAAY,EAAI,kEAQxC,EAAO,IAAI,EAAA,IAAI,CAAC,CAC3B,mBACA,IAAK,CAAE,oBAAoB,CAAM,CACnC"}