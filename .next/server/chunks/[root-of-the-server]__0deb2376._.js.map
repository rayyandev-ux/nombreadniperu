{"version":3,"sources":["../../../lib/db.ts"],"sourcesContent":["import { Pool } from 'pg';\n\nconst connectionString = process.env.DATABASE_URL;\n\nif (!connectionString) {\n  throw new Error('DATABASE_URL is missing');\n}\n\nexport const pool = new Pool({\n  connectionString,\n  ssl: { rejectUnauthorized: false },\n});\n\nexport async function query(text: string, params?: any[]) {\n  const start = Date.now();\n  const res = await pool.query(text, params);\n  const duration = Date.now() - start;\n  // console.log('executed query', { text, duration, rows: res.rowCount });\n  return res;\n}\n"],"names":[],"mappings":"6kCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,yCAEA,IAAM,EAAmB,QAAQ,GAAG,CAAC,YAAY,CAEjD,GAAI,CAAC,EACH,MAAM,AAAI,MAAM,IADK,uBAIhB,IAAM,EAAO,IAAI,EAAA,IAAI,CAAC,kBAC3B,EACA,IAAK,CAAE,mBAAoB,EAAM,CACnC"}